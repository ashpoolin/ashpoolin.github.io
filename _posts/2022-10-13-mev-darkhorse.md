---
layout: post
---

## MEV Dark Horse: Rise of the Searcher/Validator

### Idea in Brief
In the spirit of FlashBots, making MEV accessible to all users of Solana is noble goal. I pose, however, that alternative, MEV-enabled clients can alter the incentive structure of the network upon which it lives. Solana has recently made two network improvements: 1. the addition of [QUIC](https://en.wikipedia.org/wiki/QUIC) transport layer protocol, and 2. created an optional field for supplying a priority fee to a transaction. While both positive, these changes affect the dynamics, and cryptoeconomic policy of the blockchain. Solana currently has no _base fee_, effectively operating as all _tip_. The fee structure, then, resembles a _first-pay auction_. Currently, 50% of the _tip_ (priority fee) is awarded to the miners, and the other 50% is burned. However, [Jito Labs](https://www.jito.wtf/) has proposed offering 100% of the tip to the validators, which I suggest is a risk towards centralization. In the absence of an [EIP-1559](https://ethereum.org/en/developers/docs/gas/#eip-1559)-inspired _base fee_, I pose that there is a significant risk of MEV-sharing _off-chain agreements (OCA)_, and raise the specter of a new class of validator--the _searcher-slash validator (S/V)_--that will enable organized groups to capture more MEV, retain their profits to increase stake, increase the number of slots they control, and ultimately compound their control over the network, at the expense of censorship resistance, and decentralization. 

### Introduction
Solana is changing and growing everyday. We joined the network to enjoy its speed and low fees, and through each new wave of users, we experienced congestion or degraded performance, but were regularly rewarded with impressive upgrades. The most significant improvements--the combination of [QUIC](https://en.wikipedia.org/wiki/QUIC) transport layer protocol and fee markets--are pretty much here, which offer great promise to create a more dynamic blockchain, that can support significantly more users and volume. I absolutely welcome these changes. QUIC brings the assurance that DDoS-scale transaction spamming will not cripple the network. And fee markets ensure that the users whose transactions are most time-sensitive, have space in the block, pending they are willing to pay for it. 

With these sweeping upgrades, though, _**the rules of the game are changing**_. Priority fees and the establishment of a fee market is good for congestion management, and also supports the financial sustainability of the network. However, priority fees also change the incentive structure of both users and operators of the chain. And that's what I want to discuss, if for no other reason than to convince myself we are on the right path. 

Without full context, this next part won't make a lot of sense, but I'll state my concern now. Solana's fee market is new, and yet to be stress-tested. I expect we will repeat many mistakes already experienced on Ethereum (e.g. boundless gas prices under peak congestion). With the lack of a mempool, private mempools emerge through new clients, to enable new features, and a new means of MEV extraction. As the new layer increases in market share, the rules and idiosyncracies of this alternative client are foisted onto the entire chain. If the specific rules of the client are not aligned with what's good for the network on the whole, it undermines it. I will re-state the problem explicitly here: I believe that as the fee structure is currently designed, we may be enabling a new vector of centralization, by allowing the largest validators to capture more MEV, and thereby accumulate more stake. Greater stake in turn gives the validator more slots per epoch, and finally allows them to capture more MEV. Specifically, the combination of searcher plus validator as one entity (a "vertically-integrated" validator or S/V) will accelerate this concentration of stake, and slots. It's a flywheel.

#### Democratizing MEV
Solana doesn't have a mempool. This is by virtue of its Turbine block propagation scheme, and the fact that it can execute transactions in parallel. When the network is not saturated with transactions, and contingent upon no state contentions (account write locks, essentially), then transactions are processed as fast as they come in, and they don't pile up anywhere. This is good for reducing MEV, since juicy transactions don't sit out in public waiting for bots to frontrun them. That's not to say that MEV doesn't exist on Solana, it's just different. And, presuming we ascribe the theory that "MEV is natural and inevitable," then it's in the network's best interest to "democratize" it, or make obtaining it equally accessible to all interested parties. In the spirit of what [FlashBots](https://www.flashbots.net/) accomplished on Ethereum, there's a similar player on Solana--[Jito Labs](https://www.jito.wtf/)--aiming to do just that. 

#### Jito Labs
What Jito is doing by creating their own MEV-enabled client is commendable, and net-net great for the network. I think very highly of both [@buffalu](https://twitter.com/buffalu__) and [@segfaultdoctor](https://twitter.com/segfaultdoctor); they're exceptionally nice [and patient] guys. Their client will bring features that are desperately needed, such as the ability for atomic execution of transaction bundles. This is all-the-more important now, as certain compound defi transactions, or the use of trade aggregators are already at transaction size limits. And, of course, atomic execution can help users prevent the partial failure of compound and/or order-sensitive trades, or getting caught off-guard by some dark forest animal. Finally, allowing validators to participate in the MEV game without having to open a searching outfit allows them to do what they do best, supports their financial viability, and benefits their stakers. I want to be clear: I love what Jito is doing, and am excited by the features and benefits that they will bring to Solana. The only thing that I would ask of Jito is to see that they do what is the best for the network's health, and not just what benefits the users of the Jito client the most. I'm not asserting that they intend to do anything else, I'm merely talking about what that might look like.

#### The Slot Machine
I don't really know what it looks like on other chains, but on Solana, a validator earns the right to create blocks based on the amount of coins that are staked. More stake = more slots. With the task of block creation, there is the potential for the validator to extract MEV by ordering transactions in a particular way. Each slot, then, confers the privilege to extract MEV to the validator. If they don't do it themselves, they are still in a position of power, with the opportunity to extract bribes for prioritizing the transactions of searchers that do. It is natural then, in a world with abundant MEV, to aspire to be the validator with the most slot opportunities. The race to control the network isn't really about accumulating more stake, it's about _**acquiring slots**_.

#### No Mempool
In its current incarnation, since Solana doesn't have a mempool, I don't think validator-based transaction ordering is a big thing--the transactions are just processed as quickly as possible, since that's the behavior of the Solana Labs client. With the new "additional fee," transactions are given priority based on their fee rate (measured in micro-lamports per compute unit), and soon QoS determined by QUIC (secondary metric for ordering). But with a new client that supports a mempool, the validator can draw from the pool of transactions and order them as they see fit. Presumably giving priority to the transaction that pays the most, but could be whatever as determined by the client's designers.

#### All Tip, No Base
Solana's current fee structure is:
```
total fee = default fee + additional_fee
total fee = default fee + additional_fee_rate * # compute units
total fee (SOL) = 0.000005 SOL + ( additional_fee_rate uL/cu / 10^15 uL/SOL ) * # compute units
```
_Note: the Ethereum analog here would be the `base fee` + `tip`, where I've subtituted `default fee` and `additional fee` for Solana._

On Solana, I believe the `total fee` just goes to the validator to take a commission and distribute the remainder to the stakers. The `additional_fee_rate` is optional, so if it's not included, you just pay 0.000005 SOL per transaction. However, of the amount that is `additional_fee` (I also call this `priority fee`), 50% is currently burned, and 50% goes to the validator/stakers. This is a nice feature that benefits non-stakers, supports financial sustainability of the chain by reducing supply inflation (slightly).

New fee structure:
As I mentioned above, the creation of a new client introduces the possibility of changing the rules. In the case of Jito, they have elected to reward 100% of the `additional_fee` to the validators (NEEDS SOURCE). This is nice for both stakers and validators, and it will likely compel validators to adopt the client to increase staking revenue. But it has a negative effect, too: if the fee payer is also the validator (or controlled by the same entity), the payer obtains the superpower of bumping every transaction waiting in line, at zero cost. Without the 50% fee burn, all of the `additional_fee` is able to be recovered by payer. 

#### First-Pay Auction
Solana's current fee scheme currently resembles the old Ethereum gas structure, prior to EIP-1559. This is because the default fee of 0.000005 SOL is for all intents and purposes, $0. Solana has a flat, negligible fee, so it is not correct to call this a "base fee." Under congestion, competitive markets or accounts will be operating in a 100% tip (priority fee) regime, which defaults to a _first-pay auction_. Such an auction is known to create difficulty for bidders, often causing them to overpay as they lack the knowledge to correctly calculate the price of gas (or compute units, in Solana's case). This is known to cause intense spikes in the price of block space, and generally worse user experience. To the point: Solana would do well to emulate Ethereum's EIP-1559 and implement a variable, per-account base fee that flexs up/down based on demand and, more importantly, is burned.

#### The Dark Horse
Here I formalize the idea of the _**searcher/validator (VIV)**_. This is an entity that, through its operations has vertically-integrated by acquiring capabilities in all of these dimensions:
- is a **validator** 
- has **infrastructure** for timely, competitve data acquisition (via its own competitively located RPCs and/or validators with Geyser plug-ins). This capability complements the searching activity, making them more effective.
- is a **searcher**. They may be doing the classical MEV (frontrunning, backrunning, arbitrage), or may just be a crypto prop shop with strategies that benefit by being first, or having information first (e.g. market makers, stat arb).

What's hazardous about this? Well, with the creation of a priority fee, the S/V can pay to jump to the front of the line. Normally, it shouldn't be a problem, but, when the searcher and the validator share the same P&L, there's synergistic effects. The searcher can overpay for priority on any slot where its partner validator is the leader. The money just goes from left pocket to right, but with all independent traders and searchers being outbid, and crowded out of the action. 

#### MEV Flywheel
Users and validators put up stake to get more slots, they've got skin in the game, so what's the problem? The issue I pose is that with the priority fee, this is an _accelerant_ to concentrating stake at top validators. The dominant validators with the most stake also have the most slots, and greatest opportunities to capture MEV. Well, you say, if all validators are able to run an MEV-enabled client, then they will all have equal opportunity to capture MEV, commensurate to the amount of stake they have. The problem stems from the searcher/validator above, since it perverts competition for MEV. _**They are able to participate in the most lucrative activity on-chain (MEV extraction), at essentially zero cost**_. The low, default 0.000005 SOL transaction fee is such that it is hard to turn a profit as a validator, and nearly impossibile to differentiate since all validators offer very similar yields. MEV will likely transform what validator revenues look like, and I expect it to become the primary revenue source for all validators. But the S/V doesn't have to pay out as much to their stakers, since they will be winning more of the time. And if they're big enough, they could even opt to set their commission to 100%, lock out others, and keep all proceeds for themselves. With the large number of slots they have, the more MEV they capture, they can retain it in their stake, to increase the number of slots that they get. Considering how compounding works, the greater retained MEV at the validator, the faster they grow, relative to their peers. This all sounds pretty circular, so let me be clear: _**the problem is not that by virtue of being large that they win. it is because of the relationship between searcher + validator, that they will consistently win the MEV (by outbidding independent searchers), and are able to retain it in their stake.**_ This enhanced stake retention is what will make the S/V more formidable, and ultimately, more centralizing.

#### Counterpoint
In this [great article](https://www.recvc.com/mev-2-0-the-rise-of-mpsvs/), Ali Sheikh shows how he believes that _MEV profit-sharing validators (MPSVS)_ are naturally competitive and will serve as a foil to stake centralization. I would urge you to read it and decide for yourself. While he makes a good point that users will move stake to the validators that share the most MEV with their stakers, I do not believe that he has considered the case where validators bolt on searching activites to supplement their revenue drive and drive an increase in their stake.  

#### Inspiration From Ethereum
FlashBots has by many measures been a success. I can't find the stat but if I recall, some 80% of validators were running MEV-geth. [With MEV-boost, they created neutral infrastructure, support proposer-builder separation (PBS), and prevent "MEV-hiding."](https://members.delphidigital.io/reports/has-flashbots-market-share-plateaued). They eliminated a great deal of surge pricing in gas, as searchers now had a transparent venue to ensure their transactions went through, without crippling the network. But it should be noted that a lot of these benefits came from tailwinds associated with the merge to proof-of-stake, and more importantly, [EIP-1559](https://ethereum.org/en/developers/docs/gas/#eip-1559). What's notable is that EIP-1559 fixed the default first-pay gas auction to a fee structure that is a _base fee_ + _tip_ (priority fee). Here, the base fee is 100% burned. This was deemed necessary, to prevent miners/validators from spamming the network with transactions, and driving up the base fee to increase their own revenues. And, as [Hasu]() so eloquently explains in [this Bankless episode](https://shows.banklesshq.com/p/-eip-1559-hasu), it is also a deterrent to off-chain agreements (and the S/V), since, as the base fee comprises a significant portion of the total fee, an overzealous searcher cannot enjoy the assurance that they will get their gas expense back. EIP-1559 ensures that only the tip is recoverable in such a scenario.

#### Moving Forward
I believe that there are a number of mitigations to the issue I've outlined above, to [#keepstakedecentralized](https://chainflow.io/a-decentralized-staking-doomsday-scenario/). The first, and obvious solution is for Jito to continue to burn 50% of all priority fees. Again, this is a deterrent to off-chain agreements, and for S/V who would otherwise evade the costs of block space priority auctions. In the longer run, I see that adding a flexible base fee on a per-account basis, which is burned, would enshrine protection against S/V and OCA. And, finally, a personal favorite idea: [Anatoly suggests that more than one validator could be tasked with building blocks on each slot](https://twitter.com/aeyakovenko/status/1580997876997443584).


#### Conclusion
Well, this is probably a healthy place to wrap it up. In the article I discussed a primary objection to the current fee structure--in that it behaves essentially like an "all tip" gas price on Ethereum, and that, absent any portion of that fee being burned, will enable searcher-plus-validator (S/V) outfits to side-step priority fees altogether, and subverting MEV competition. I proposed a few immediate options for reducing this risk, primarily, ensuring that some portion of fees under all scenarios, with the ultimate goal of instituting a per-account, EIP-1559-inspired base fee, or a strategy with comparable effect. 

While this article is likely divisive, I think it's prudent I express my concerns at the outset, rather than trying to say "I told you so" later. Many of you will not agree with me, and I welcome you to show me the flaws in my reasoning. This would help us all sleep better at night. Where my objections are valid, I'd like to this helps shine light on the problem, so that we can correct course, thereby preserving the decentralized properties of our  beloved network.

Thanks for reading, and if you found this helpful, please consider sharing it.
_-Ash_




